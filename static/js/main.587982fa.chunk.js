(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){e.exports=a(26)},20:function(e,t,a){},22:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),r=a(13),i=a.n(r),o=(a(20),a(14)),u=a(6),c=a(7),l=a(9),d=a(8),v=a(10),h=a(0),f=(a(22),a(4)),p=a(5);a(3).b.add(f.a,f.c,f.b);var b=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).decodeHTML=a.decodeHTML.bind(Object(h.a)(Object(h.a)(a))),a.favouritesHandler=a.favouritesHandler.bind(Object(h.a)(Object(h.a)(a))),a}return Object(v.a)(t,e),Object(c.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.favouredStatus!==e.favouredStatus}},{key:"decodeHTML",value:function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}},{key:"favouritesHandler",value:function(e){var t=this.props.getFavoured();if(t[e.title]){var a=this.props.getFavourites().indexOf(e),s=this.props.getFavourites();s.splice(a,1),this.props.updateFavourites(s),t[e.title]=!1,this.props.setFavoured(t)}else{var n=this.props.getSearchResults()[this.props.getSearchResults().indexOf(e)];this.props.setFavourites(n),t[e.title]=!0,this.props.setFavoured(t)}}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"wrapper"},n.a.createElement("div",{className:"title"},n.a.createElement(p.a,{icon:f.c,id:"icon",style:{color:this.props.getFavoured()[this.props.item.title]?"rgb(35, 167, 35)":"grey"},onClick:function(){return e.favouritesHandler(e.props.item)}}),n.a.createElement("p",{id:"title"},this.props.title)),n.a.createElement("div",{className:"body",dangerouslySetInnerHTML:{__html:this.decodeHTML(this.props.text)}}))}}]),t}(n.a.Component),m=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={wasteInfo:null,isLoading:!1,userInput:"",searchResults:[],favourites:[],favoured:{}},a.handleChange=a.handleChange.bind(Object(h.a)(Object(h.a)(a))),a.setFilteredResults=a.setFilteredResults.bind(Object(h.a)(Object(h.a)(a))),a.filterResults=a.filterResults.bind(Object(h.a)(Object(h.a)(a))),a.clickEvent=a.clickEvent.bind(Object(h.a)(Object(h.a)(a))),a.setFavourites=a.setFavourites.bind(Object(h.a)(Object(h.a)(a))),a.getFavourites=a.getFavourites.bind(Object(h.a)(Object(h.a)(a))),a.updateFavourites=a.updateFavourites.bind(Object(h.a)(Object(h.a)(a))),a.getSearchResults=a.getSearchResults.bind(Object(h.a)(Object(h.a)(a))),a.getFavoured=a.getFavoured.bind(Object(h.a)(Object(h.a)(a))),a.setFavoured=a.setFavoured.bind(Object(h.a)(Object(h.a)(a))),a.renderMultipleInstructions=a.renderMultipleInstructions.bind(Object(h.a)(Object(h.a)(a))),a.enterPressed=a.enterPressed.bind(Object(h.a)(Object(h.a)(a))),a}return Object(v.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),fetch("https://secure.toronto.ca/cc_sr_v1/data/swm_waste_wizard_APR?limit=1000").then(function(e){if(e.ok)return e.json();throw new Error("Something went wrong ...")}).then(function(t){return e.setState({wasteInfo:t,isLoading:!1,error:null})}).catch(function(t){return e.setState({error:t,isLoading:!1})}),document.addEventListener("keydown",this.enterPressed)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.enterPressed)}},{key:"getFavoured",value:function(){return this.state.favoured}},{key:"setFavoured",value:function(e){this.setState({favoured:e})}},{key:"setFilteredResults",value:function(e){this.setState({searchResults:e})}},{key:"filterResults",value:function(e){var t=e.toLowerCase();return this.state.wasteInfo.filter(function(e){return e.keywords.includes(t)})}},{key:"setFavourites",value:function(e){this.setState({favourites:[].concat(Object(o.a)(this.state.favourites),[e])})}},{key:"updateFavourites",value:function(e){this.setState({favourites:e})}},{key:"getFavourites",value:function(){return this.state.favourites}},{key:"getSearchResults",value:function(){return this.state.searchResults}},{key:"handleChange",value:function(e){this.setState({userInput:e.target.value,searchResults:[]})}},{key:"clickEvent",value:function(e){var t=this.filterResults(e);this.setFilteredResults(t)}},{key:"enterPressed",value:function(e){13===(e.keyCode||e.which)&&this.clickEvent(this.state.userInput)}},{key:"renderMultipleInstructions",value:function(e){var t=this;return e.map(function(e){if(!t.state.favoured.hasOwnProperty(e.title)){var a=t.state.favoured;a[e.title]=!1,t.setState({favoured:a})}return n.a.createElement(b,{text:e.body,title:e.title,favouredStatus:t.state.favoured[e.title],isFavourite:t.state.favourites.indexOf(e)>=0,item:e,setFavourites:t.setFavourites,getFavourites:t.getFavourites,getSearchResults:t.getSearchResults,updateFavourites:t.updateFavourites,setFavoured:t.setFavoured,getFavoured:t.getFavoured})})}},{key:"render",value:function(){var e=this,t=this.renderMultipleInstructions(this.state.searchResults),a=this.renderMultipleInstructions(this.state.favourites),s=/\w+/gm.test(this.state.userInput);return this.state.isLoading?n.a.createElement("div",{style:{"font-size":"2.5rem"}},n.a.createElement(p.a,{icon:"spinner",className:"fas fa-spinner fa-pulse fa- 10x loadingIcon"})):n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement("h1",null,"Toronto Waste Lookup")),n.a.createElement("div",{class:"search-container",id:"search"},n.a.createElement("input",{type:"text",name:"search",value:this.state.input,onChange:this.handleChange}),n.a.createElement("button",{style:{"background-color":"rgb(35, 167, 35)"},onClick:function(){return e.clickEvent(e.state.userInput)}},n.a.createElement(p.a,{icon:"search",rotation:"90",style:{color:"white"},size:"lg"}))),n.a.createElement("div",null,s?t:null),n.a.createElement("div",{className:"favourites"},n.a.createElement("h2",{style:{color:"rgb(35, 167, 35)",display:"flex","align-items":"flex-start"}},this.state.favourites.length>0?"Favourites":null),n.a.createElement("div",null,this.state.favourites.length>0?a:null)))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(m,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[15,2,1]]]);
//# sourceMappingURL=main.587982fa.chunk.js.map